# ============================================================================
# Linode GPU Kubernetes + Kubeflow Configuration
# ============================================================================
# Linode API Token is automatically read from linode-cli configuration
# No need to set it here - it will be loaded via environment variable
# To verify your token: linode-cli configure get token

# ============================================================================
# PHASE 1: Infrastructure Configuration
# ============================================================================

# Cluster Configuration
# cluster_name_prefix = "my-cluster"  # Optional: Leave blank to use your system username
region              = "us-ord" # Chicago, US

# Kubernetes Version
kubernetes_version = "1.34"

# GPU Node Configuration
# NVIDIA RTX 4000 Ada GPU x1 Small: 1 GPU, 4 vCPU, 16GB RAM, 512GB SSD
gpu_node_type  = "g2-gpu-rtx4000a1-s"
gpu_node_count = 1

# Autoscaling Configuration
autoscaler_min = 1
autoscaler_max = 5

# High Availability
ha_control_plane = true

# Tags
tags = ["kubeflow", "gpu", "ml", "chicago"]

# Security (Update with your IP ranges)
allowed_kubectl_ips     = ["0.0.0.0/0"]
allowed_kubeflow_ui_ips = ["0.0.0.0/0"]

# ============================================================================
# PHASE 2: GPU Operator Configuration
# ============================================================================

# Enable GPU Operator (NVIDIA drivers and device plugin)
install_gpu_operator = true

# GPU Operator Version
gpu_operator_version = "v24.9.0"

# Enable GPU Monitoring (DCGM exporter for Prometheus)
enable_gpu_monitoring = true

# ============================================================================
# PHASE 3: Kubeflow Configuration
# ============================================================================

# Enable Kubeflow Platform
# WARNING: Kubeflow installation takes 15-30 minutes and requires significant resources
install_kubeflow = false  # Set to true when ready to install Kubeflow

# Kubeflow Version
kubeflow_version = "v1.9.0"

# Installation Method
# - "manifests": Component-by-component (recommended, more reliable)
# - "quick": All-in-one (faster but less control)
kubeflow_install_method = "manifests"

# Default User Configuration
kubeflow_user_email = "user@example.com"

# Expose Kubeflow UI via NodePort (useful for testing)
kubeflow_expose_nodeport = false

# ============================================================================
# Example Configurations
# ============================================================================

# Development/Testing Setup (minimal resources):
# gpu_node_count          = 1
# autoscaler_max          = 2
# install_gpu_operator    = true
# install_kubeflow        = false  # Install manually later

# Production ML Platform (full setup):
# gpu_node_count          = 2
# autoscaler_max          = 5
# install_gpu_operator    = true
# enable_gpu_monitoring   = true
# install_kubeflow        = true
# kubeflow_user_email     = "ml-team@company.com"
